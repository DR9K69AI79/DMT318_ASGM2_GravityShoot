# GravityShoot é¡¹ç›®æ¶æ„è¯¦ç»†æ–‡æ¡£

## ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ•´ä½“æ¶æ„è®¾è®¡](#æ•´ä½“æ¶æ„è®¾è®¡)
3. [æ ¸å¿ƒç³»ç»Ÿè¯¦è§£](#æ ¸å¿ƒç³»ç»Ÿè¯¦è§£)
4. [è„šæœ¬åŠŸèƒ½èŒè´£åˆ’åˆ†](#è„šæœ¬åŠŸèƒ½èŒè´£åˆ’åˆ†)
5. [æ•°æ®æµåˆ†æ](#æ•°æ®æµåˆ†æ)
6. [ç½‘ç»œæ¶æ„](#ç½‘ç»œæ¶æ„)
7. [æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼](#æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼)
8. [æ‰©å±•æŒ‡å—](#æ‰©å±•æŒ‡å—)

---

## é¡¹ç›®æ¦‚è¿°

**GravityShoot** æ˜¯ä¸€ä¸ªåŸºäºUnityå¼•æ“å¼€å‘çš„å¤šäººåœ¨çº¿é‡åŠ›å°„å‡»æ¸¸æˆã€‚é¡¹ç›®é‡‡ç”¨**æ¨¡å—åŒ–æ¶æ„**è®¾è®¡ï¼Œæ”¯æŒè‡ªå®šä¹‰é‡åŠ›ç¯å¢ƒä¸‹çš„ç¬¬ä¸€äººç§°å°„å‡»æ¸¸æˆç©æ³•ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸŒŒ **è‡ªå®šä¹‰é‡åŠ›ç³»ç»Ÿ**ï¼šæ”¯æŒå¤šé‡åŠ›åœºå åŠ ï¼Œåˆ›é€ ç‹¬ç‰¹çš„3Dç©ºé—´æ¸¸æˆä½“éªŒ
- ğŸ® **å¤šäººç½‘ç»œå¯¹æˆ˜**ï¼šåŸºäºPUN2çš„ç¨³å®šç½‘ç»œæ¶æ„ï¼Œæ”¯æŒå®¢æˆ·ç«¯é¢„æµ‹å’Œå»¶è¿Ÿè¡¥å¿
- ğŸ”« **ç‰©ç†å°„å‡»ç³»ç»Ÿ**ï¼šåŸºäºç‰©ç†çš„æŠ•å°„ç‰©ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æ­¦å™¨ç±»å‹
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶ç³»ç»Ÿ**ï¼šé€‚é…é‡åŠ›ç¯å¢ƒçš„è§’è‰²æ§åˆ¶ï¼Œæ”¯æŒå¤æ‚åœ°å½¢ç§»åŠ¨
- ğŸ“± **æ–°è¾“å…¥ç³»ç»Ÿ**ï¼šåŸºäºUnity Input Systemçš„ç°ä»£åŒ–è¾“å…¥å¤„ç†

### æŠ€æœ¯æ ˆ
- **å¼•æ“**: Unity 2022.3+ LTS
- **ç½‘ç»œ**: Photon PUN2
- **è¾“å…¥**: Unity Input System
- **ç‰©ç†**: Unity Physics + è‡ªå®šä¹‰é‡åŠ›
- **æ¶æ„**: æ¨¡å—åŒ–ç»„ä»¶è®¾è®¡
- **ç¼–ç¨‹è¯­è¨€**: C#

---

## æ•´ä½“æ¶æ„è®¾è®¡

### æ¶æ„å±‚æ¬¡å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UI å±‚                          â”‚
â”‚              (æ¸¸æˆç•Œé¢ç³»ç»Ÿ)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  è¾“å…¥å±‚                          â”‚
â”‚        InputManager â†’ PlayerInput               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ§åˆ¶å±‚                          â”‚
â”‚  PlayerMotor | PlayerView | WeaponController    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç³»ç»Ÿå±‚                          â”‚
â”‚    Gravity | Physics | Animation | Audio        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç½‘ç»œå±‚                          â”‚
â”‚      NetworkPlayerController | PUN2             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å±‚                          â”‚
â”‚           ScriptableObject é…ç½®ç³»ç»Ÿ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–åˆ†ç¦»**ï¼šå„ç³»ç»ŸåŠŸèƒ½ç‹¬ç«‹ï¼Œé™ä½è€¦åˆåº¦
2. **äº‹ä»¶é©±åŠ¨**ï¼šä½¿ç”¨äº‹ä»¶ç³»ç»Ÿå®ç°ç»„ä»¶é—´é€šä¿¡
3. **æ•°æ®é©±åŠ¨**ï¼šé€šè¿‡ScriptableObjectå®ç°é…ç½®ä¸ä»£ç åˆ†ç¦»
4. **ç½‘ç»œå‹å¥½**ï¼šä»è®¾è®¡åˆæœŸè€ƒè™‘ç½‘ç»œåŒæ­¥éœ€æ±‚
5. **æ‰©å±•æ€§ä¼˜å…ˆ**ï¼šæŠ½è±¡åŸºç±»è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•

---

## æ ¸å¿ƒç³»ç»Ÿè¯¦è§£

### 1. é‡åŠ›ç³»ç»Ÿ (Gravity System)

#### ç³»ç»Ÿæ¶æ„
```
CustomGravity (é™æ€ç®¡ç†å™¨)
    â†“
GravitySource (æŠ½è±¡åŸºç±»)
    â†“
â”œâ”€â”€ GravitySphere (çƒå½¢é‡åŠ›)
â”œâ”€â”€ GravityBox (ç›’å½¢é‡åŠ›)  
â”œâ”€â”€ GravityPlane (å¹³é¢é‡åŠ›)
â””â”€â”€ GravityBoxInside (å†…éƒ¨é‡åŠ›)
```

#### æ ¸å¿ƒç±»è¯´æ˜

**CustomGravity** - é‡åŠ›ç³»ç»Ÿé™æ€ç®¡ç†å™¨
```csharp
public static class CustomGravity
{
    // æ³¨å†Œ/æ³¨é”€é‡åŠ›æº
    public static void Register(GravitySource source)
    public static void Unregister(GravitySource source)
    
    // è·å–æŒ‡å®šä½ç½®çš„ç´¯ç§¯é‡åŠ›
    public static Vector3 GetGravity(Vector3 position)
    public static Vector3 GetGravity(Vector3 position, out Vector3 upAxis)
    
    // è·å–æœ€å¼ºé‡åŠ›æºçš„ä¸Šè½´æ–¹å‘
    public static Vector3 GetUpAxis(Vector3 position)
}
```

**GravitySource** - é‡åŠ›æºæŠ½è±¡åŸºç±»
```csharp
public abstract class GravitySource : MonoBehaviour
{
    // è®¡ç®—æŒ‡å®šä½ç½®çš„é‡åŠ›åŠ é€Ÿåº¦
    public abstract Vector3 GetGravity(Vector3 position);
    
    // è·å–ä¸Šè½´æ–¹å‘
    public virtual Vector3 GetUpAxis(Vector3 position);
    
    // è‡ªåŠ¨æ³¨å†Œ/æ³¨é”€
    protected virtual void OnEnable() => CustomGravity.Register(this);
    protected virtual void OnDisable() => CustomGravity.Unregister(this);
}
```

#### é‡åŠ›æºå®ç°

1. **GravitySphere** - æ¨¡æ‹Ÿè¡Œæ˜Ÿå¼•åŠ›
   - æ”¯æŒå¹³æ–¹åæ¯”å®šå¾‹
   - å¯é…ç½®é‡åŠ›åŠå¾„å’Œå¼ºåº¦

2. **GravityBox** - å¤æ‚ç›’å½¢é‡åŠ›åœº
   - æ”¯æŒå†…å¤–è·ç¦»æ§åˆ¶
   - è¡°å‡å› å­é…ç½®
   - è¾¹ç•Œæ£€æµ‹ç®—æ³•

3. **GravityPlane** - æ’å®šæ–¹å‘é‡åŠ›
   - é€‚ç”¨äºä¼ ç»Ÿé‡åŠ›ç¯å¢ƒ
   - å¯é…ç½®å½±å“èŒƒå›´

4. **GravityBoxInside** - å†…éƒ¨é‡åŠ›ä½“
   - ä»…åœ¨æŒ‡å®šä½“ç§¯å†…ç”Ÿæ•ˆ
   - æ”¯æŒä»»æ„æ–¹å‘é‡åŠ›

#### æŠ€æœ¯ç‰¹ç‚¹
- **å¤šé‡åŠ›åœºå åŠ **ï¼šæ”¯æŒå¤šä¸ªé‡åŠ›æºåŒæ—¶ä½œç”¨
- **å®æ—¶è®¡ç®—**ï¼šæ¯å¸§è®¡ç®—å½“å‰ä½ç½®çš„é‡åŠ›å‘é‡
- **ç½‘ç»œåŒæ­¥**ï¼šé‡åŠ›æ–¹å‘åœ¨ç½‘ç»œé—´ä¿æŒä¸€è‡´
- **æ€§èƒ½ä¼˜åŒ–**ï¼šç©ºé—´åˆ†å‰²å’Œå±‚æ¬¡æ£€æµ‹ä¼˜åŒ–

### 2. è§’è‰²æ§åˆ¶ç³»ç»Ÿ (Character Control System)

#### ç³»ç»Ÿæ¶æ„
```
PlayerInput (è¾“å…¥æ¥å£)
    â†“
PlayerMotor (è¿åŠ¨æ§åˆ¶) â†â†’ PlayerView (è§†è§’æ§åˆ¶)
    â†“
PlayerAnimationController (åŠ¨ç”»æ§åˆ¶)
    â†“
PlayerStatusManager (çŠ¶æ€ç®¡ç†)
```

#### æ ¸å¿ƒç±»è¯¦è§£

**PlayerMotor** - åŸºäºRigidbodyçš„è¿åŠ¨æ§åˆ¶å™¨
```csharp
public class PlayerMotor : MonoBehaviour
{
    // æ ¸å¿ƒå±æ€§
    public Vector3 Velocity { get; }           // å½“å‰é€Ÿåº¦
    public Vector3 UpAxis { get; }             // å½“å‰"ä¸Š"æ–¹å‘
    public bool IsGrounded { get; }            // æ˜¯å¦åœ¨åœ°é¢
    
    // ç§»åŠ¨æ§åˆ¶
    public float MoveSpeed { get; }            // ç§»åŠ¨é€Ÿåº¦
    public bool IsSprinting { get; }           // æ˜¯å¦åœ¨å¥”è·‘
    
    // é‡åŠ›é€‚é…
    private void UpdateSmoothedUpAxis()        // å¹³æ»‘æ›´æ–°ä¸Šè½´æ–¹å‘
    private void UpdateRotation()              // ç»Ÿä¸€æ—‹è½¬æ›´æ–°
    
    // åœ°é¢æ£€æµ‹
    private bool CheckGround()                 // åœ°é¢æ£€æµ‹ç®—æ³•
    private bool SnapToGround()                // åœ°é¢å¸é™„ç®—æ³•
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- **å¹³æ»‘é‡åŠ›è½¬æ¢**ï¼šé€šè¿‡æ’å€¼æ¶ˆé™¤é‡åŠ›åˆ‡æ¢æ—¶çš„æŠ–åŠ¨
- **ç²¾ç¡®åœ°é¢æ£€æµ‹**ï¼šæ”¯æŒå¤æ‚åœ°å½¢çš„åœ°é¢è¯†åˆ«
- **ç‰©ç†ä¼˜å…ˆ**ï¼šç›´æ¥æ§åˆ¶é€Ÿåº¦è€Œéæ–½åŠ åŠ›ï¼Œç¡®ä¿ç²¾ç¡®æ§åˆ¶
- **Coyote Time**ï¼šå®½å®¹çš„è·³è·ƒæ—¶æœºåˆ¤å®š

**PlayerView** - æ‘„åƒæœºå’Œè§†è§’æ§åˆ¶
```csharp
public class PlayerView : MonoBehaviour
{
    // è§†è§’æ§åˆ¶
    private void UpdateCameraRotation()        // ç›¸æœºæ—‹è½¬æ›´æ–°
    private void UpdatePitchAngleToUpAxis()    // ä¿¯ä»°è§’é€‚é…é‡åŠ›
    
    // é‡åŠ›å“åº”
    private void HandleGravityTransition()     // é‡åŠ›è½¬æ¢å¤„ç†
    public void UpdateViewForGravityChange()  // è§†è§’é‡åŠ›é€‚é…
}
```

**è®¾è®¡äº®ç‚¹**ï¼š
- **é‡åŠ›è‡ªé€‚åº”**ï¼šæ‘„åƒæœºè‡ªåŠ¨é€‚é…å½“å‰é‡åŠ›æ–¹å‘
- **å¹³æ»‘è½¬æ¢**ï¼šé‡åŠ›å˜åŒ–æ—¶çš„è§†è§’å¹³æ»‘è¿‡æ¸¡
- **å§¿æ€ä¿æŒ**ï¼šåœ¨å¤æ‚é‡åŠ›ç¯å¢ƒä¸­ä¿æŒåˆç†çš„è§†è§’

### 3. æ­¦å™¨ç³»ç»Ÿ (Weapon System)

#### ç³»ç»Ÿæ¶æ„
```
PlayerWeaponController (æ­¦å™¨æ§åˆ¶å™¨)
    â†“
WeaponBase (æ­¦å™¨åŸºç±»)
    â†“
â”œâ”€â”€ ProjectileWeapon (æŠ•å°„å‹æ­¦å™¨)
â””â”€â”€ HitscanWeapon (å³æ—¶å‘½ä¸­æ­¦å™¨)
    â†“
ProjectileBase (æŠ•å°„ç‰©åŸºç±»)
    â†“
â”œâ”€â”€ BasicProjectile (åŸºç¡€æŠ•å°„ç‰©)
â”œâ”€â”€ GrenadeLauncher (æ¦´å¼¹æŠ•å°„ç‰©)
â””â”€â”€ BouncingProjectile (å¼¹è·³æŠ•å°„ç‰©)
```

#### æ ¸å¿ƒç±»è¯¦è§£

**PlayerWeaponController** - æ­¦å™¨æ§åˆ¶å™¨
```csharp
public class PlayerWeaponController : MonoBehaviourPun
{
    // æ­¦å™¨ç®¡ç†
    public WeaponBase CurrentWeapon { get; }
    public int CurrentWeaponIndex { get; }
    public Vector3 CurrentAimDirection { get; }
    
    // è¾“å…¥å¤„ç†
    private void UpdateFireInput()             // å°„å‡»è¾“å…¥å¤„ç†
    private void UpdateWeaponSwitching()       // æ­¦å™¨åˆ‡æ¢å¤„ç†
    
    // ç„å‡†ç³»ç»Ÿ
    private Vector3 CalculatePhysicsAimDirection() // ç‰©ç†ç„å‡†è®¡ç®—
    public Ray GetAimRay()                     // è·å–ç„å‡†å°„çº¿
    
    // å°„å‡»æ§åˆ¶
    public bool TryFire()                      // å°è¯•å°„å‡»
}
```

**WeaponBase** - æ­¦å™¨æŠ½è±¡åŸºç±»
```csharp
public abstract class WeaponBase : MonoBehaviourPun
{
    // çŠ¶æ€å±æ€§
    public bool IsEquipped { get; }
    public bool IsReloading { get; }
    public bool HasAmmo { get; }
    public bool CanFire { get; }
    
    // æ ¸å¿ƒæ¥å£
    public abstract bool Fire(Vector3 direction, float timestamp);
    public abstract void NetworkFire(Vector3 direction, float timestamp);
    
    // å¼¹è¯ç®¡ç†
    public virtual bool Reload()
    public virtual void ConsumeAmmo()
}
```

**ProjectileBase** - æŠ•å°„ç‰©æŠ½è±¡åŸºç±»
```csharp
public abstract class ProjectileBase : MonoBehaviourPun
{
    // å‘å°„æ¥å£
    public virtual void Launch(Vector3 direction, float speed, 
                              WeaponBase sourceWeapon, GameObject sourcePlayer)
    
    // ç‰©ç†å¤„ç†
    protected virtual void ApplyCustomGravity()    // è‡ªå®šä¹‰é‡åŠ›åº”ç”¨
    protected virtual void HandleCollision()       // ç¢°æ’å¤„ç†
    
    // å¼¹è·³ç³»ç»Ÿ
    protected virtual void TryBounce()             // å¼¹è·³é€»è¾‘
    
    // ç½‘ç»œåŒæ­¥
    public virtual void OnNetworkHit()             // ç½‘ç»œå‘½ä¸­äº‹ä»¶
    public virtual void OnNetworkBounce()          // ç½‘ç»œå¼¹è·³äº‹ä»¶
}
```

#### æŠ€æœ¯ç‰¹ç‚¹
- **ç‰©ç†ç„å‡†**ï¼šåŸºäºå°„çº¿æ£€æµ‹çš„çœŸå®ç„å‡†ç³»ç»Ÿ
- **ç½‘ç»œåŒæ­¥**ï¼šRPCåŒæ­¥å°„å‡»äº‹ä»¶ï¼Œç¡®ä¿å¤šäººä¸€è‡´æ€§
- **æŠ•å°„ç‰©æ± **ï¼šå¯¹è±¡æ± ç®¡ç†ï¼Œä¼˜åŒ–æ€§èƒ½
- **å¼¹è·³ç³»ç»Ÿ**ï¼šæ”¯æŒå¤æ‚çš„å¼¹è·³ç‰©ç†è®¡ç®—
- **é‡åŠ›é€‚é…**ï¼šæŠ•å°„ç‰©è‡ªåŠ¨é€‚åº”å½“å‰é‡åŠ›ç¯å¢ƒ

### 4. è¾“å…¥ç³»ç»Ÿ (Input System)

#### ç³»ç»Ÿæ¶æ„
```
Unity Input System (åº•å±‚)
    â†“
InputManager (ä¸­å¤®ç®¡ç†å™¨)
    â†“
PlayerInput (æœ¬åœ°è¿‡æ»¤å™¨)
    â†“
å„ç§æ§åˆ¶å™¨ (PlayerMotor, WeaponController, etc.)
```

#### æ ¸å¿ƒè®¾è®¡

**InputManager** - è¾“å…¥ç³»ç»Ÿä¸­å¤®ç®¡ç†å™¨
```csharp
public class InputManager : Singleton<InputManager>
{
    // è¾“å…¥çŠ¶æ€
    public Vector2 MoveInput { get; }          // ç§»åŠ¨è¾“å…¥
    public Vector2 LookInput { get; }          // è§†è§’è¾“å…¥
    public bool FirePressed { get; }           // å°„å‡»æŒ‰ä¸‹
    public bool JumpPressed { get; }           // è·³è·ƒæŒ‰ä¸‹
    
    // è¾“å…¥äº‹ä»¶
    public static event Action<Vector2> OnMoveInput;
    public static event Action OnFirePressed;
    public static event Action OnJumpPressed;
    
    // è¾“å…¥å¤„ç†
    private void ProcessInputs()               // è¾“å…¥å¤„ç†ç®¡é“
    private Vector2 ApplyDeadZone(Vector2 input) // æ­»åŒºåº”ç”¨
}
```

**PlayerInput** - è¾“å…¥è¿‡æ»¤å™¨
```csharp
public class PlayerInput : MonoBehaviour
{
    // è¿‡æ»¤è®¾ç½®
    public bool EnableMove { get; set; }
    public bool EnableLook { get; set; }
    public bool EnableFire { get; set; }
    
    // è¾“å…¥è®¿é—®
    public Vector2 MoveInput { get; }          // è¿‡æ»¤åçš„ç§»åŠ¨è¾“å…¥
    public bool FirePressed { get; }           // è¿‡æ»¤åçš„å°„å‡»è¾“å…¥
    
    // è¾“å…¥æ§åˆ¶
    public void SetInputEnabled(bool move, bool look, bool fire)
    public void SetCursorLock(bool locked)
}
```

#### è®¾è®¡ä¼˜åŠ¿
- **äº‹ä»¶é©±åŠ¨**ï¼šè§£è€¦è¾“å…¥ä¸æ§åˆ¶é€»è¾‘
- **åˆ†å±‚è¿‡æ»¤**ï¼šæ”¯æŒå±€éƒ¨è¾“å…¥æ§åˆ¶
- **ç¼“å†²æœºåˆ¶**ï¼šè¾“å…¥ç¼“å†²æå‡å“åº”æ€§
- **ç½‘ç»œå‹å¥½**ï¼šè¾“å…¥çŠ¶æ€æ˜“äºç½‘ç»œåŒæ­¥

### 5. ç½‘ç»œç³»ç»Ÿ (Network System)

#### ç³»ç»Ÿæ¶æ„
```
Photon PUN2 (åº•å±‚ç½‘ç»œ)
    â†“
NetworkSyncBase (åŒæ­¥åŸºç±»)
    â†“
â”œâ”€â”€ NetworkPlayerController (ç©å®¶åŒæ­¥)
â”œâ”€â”€ NetworkInputManager (è¾“å…¥åŒæ­¥)
â””â”€â”€ NetworkProjectileManager (æŠ•å°„ç‰©åŒæ­¥)
```

#### æ ¸å¿ƒç±»è¯¦è§£

**NetworkPlayerController** - ç©å®¶ç½‘ç»œåŒæ­¥
```csharp
public class NetworkPlayerController : NetworkSyncBase
{
    // çŠ¶æ€ç®¡ç†
    public bool IsLocalPlayer { get; }
    public Vector3 PredictedPosition { get; }
    public float NetworkLatency { get; }
    
    // å®¢æˆ·ç«¯é¢„æµ‹
    private void HandleLocalPlayerUpdate()     // æœ¬åœ°ç©å®¶æ›´æ–°
    private void HandleRemotePlayerUpdate()    // è¿œç¨‹ç©å®¶æ›´æ–°
    
    // çŠ¶æ€åŒæ­¥
    protected override void WriteData(PhotonStream stream)
    protected override void ReadData(PhotonStream stream, PhotonMessageInfo info)
    
    // å»¶è¿Ÿè¡¥å¿
    private void ApplyLagCompensation()        // å»¶è¿Ÿè¡¥å¿ç®—æ³•
    private void InterpolateRemotePlayer()     // è¿œç¨‹ç©å®¶æ’å€¼
}
```

#### ç½‘ç»œåŒæ­¥ç­–ç•¥

1. **ç©å®¶çŠ¶æ€åŒæ­¥**
   - ä½ç½®ã€æ—‹è½¬ã€é€Ÿåº¦
   - é‡åŠ›æ–¹å‘å’Œä¸Šè½´
   - ç§»åŠ¨çŠ¶æ€ï¼ˆè·³è·ƒã€å¥”è·‘ç­‰ï¼‰

2. **è¾“å…¥åŒæ­¥**
   - ç§»åŠ¨è¾“å…¥å‘é‡
   - æŒ‰é”®çŠ¶æ€
   - æ—¶é—´æˆ³åŒæ­¥

3. **æ­¦å™¨åŒæ­¥**
   - å°„å‡»äº‹ä»¶RPC
   - å¼¹è¯çŠ¶æ€
   - æ­¦å™¨åˆ‡æ¢

4. **æŠ•å°„ç‰©åŒæ­¥**
   - ç½‘ç»œå®ä¾‹åŒ–
   - è½¨è¿¹åŒæ­¥
   - å‘½ä¸­äº‹ä»¶

#### ä¼˜åŒ–æŠ€æœ¯
- **å®¢æˆ·ç«¯é¢„æµ‹**ï¼šå‡å°‘è¾“å…¥å»¶è¿Ÿæ„ŸçŸ¥
- **çŠ¶æ€æ’å€¼**ï¼šå¹³æ»‘è¿œç¨‹ç©å®¶ç§»åŠ¨
- **å»¶è¿Ÿè¡¥å¿**ï¼šå…¬å¹³çš„å‘½ä¸­åˆ¤å®š
- **å‹ç¼©ä¼ è¾“**ï¼šå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—

---

## è„šæœ¬åŠŸèƒ½èŒè´£åˆ’åˆ†

### æ ¸å¿ƒè§’è‰²æ§åˆ¶è„šæœ¬

| è„šæœ¬å | ä¸»è¦èŒè´£ | ä¾èµ–å…³ç³» |
|--------|----------|----------|
| `PlayerMotor` | ç‰©ç†è¿åŠ¨æ§åˆ¶ã€é‡åŠ›é€‚é…ã€åœ°é¢æ£€æµ‹ | PlayerInput, CustomGravity |
| `PlayerView` | æ‘„åƒæœºæ§åˆ¶ã€è§†è§’ç®¡ç†ã€é‡åŠ›è½¬æ¢ | PlayerMotor, PlayerInput |
| `PlayerInput` | è¾“å…¥è¿‡æ»¤ã€çŠ¶æ€æš´éœ² | InputManager |
| `PlayerStatusManager` | ç”Ÿå‘½å€¼ã€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶åˆ†å‘ | PlayerMotor, WeaponController |
| `PlayerAnimationController` | åŠ¨ç”»æ§åˆ¶ã€çŠ¶æ€æœºç®¡ç† | PlayerStatusManager |

### æ­¦å™¨ç³»ç»Ÿè„šæœ¬

| è„šæœ¬å | ä¸»è¦èŒè´£ | ä¾èµ–å…³ç³» |
|--------|----------|----------|
| `PlayerWeaponController` | æ­¦å™¨ç®¡ç†ã€å°„å‡»æ§åˆ¶ã€ç„å‡†è®¡ç®— | PlayerInput, WeaponBase |
| `WeaponBase` | æ­¦å™¨åŸºç¡€åŠŸèƒ½ã€å¼¹è¯ç®¡ç† | WeaponData (SO) |
| `ProjectileWeapon` | æŠ•å°„å‹æ­¦å™¨å®ç° | WeaponBase, ProjectileBase |
| `ProjectileBase` | æŠ•å°„ç‰©ç‰©ç†ã€ç¢°æ’æ£€æµ‹ã€ç½‘ç»œåŒæ­¥ | CustomGravity |

### é‡åŠ›ç³»ç»Ÿè„šæœ¬

| è„šæœ¬å | ä¸»è¦èŒè´£ | ä¾èµ–å…³ç³» |
|--------|----------|----------|
| `CustomGravity` | é‡åŠ›æºç®¡ç†ã€é‡åŠ›è®¡ç®— | GravitySource |
| `GravitySource` | é‡åŠ›æºæŠ½è±¡æ¥å£ | - |
| `GravitySphere` | çƒå½¢é‡åŠ›åœºå®ç° | GravitySource |
| `GravityBox` | ç›’å½¢é‡åŠ›åœºå®ç° | GravitySource |
| `GravityPlane` | å¹³é¢é‡åŠ›åœºå®ç° | GravitySource |

### ç½‘ç»œç³»ç»Ÿè„šæœ¬

| è„šæœ¬å | ä¸»è¦èŒè´£ | ä¾èµ–å…³ç³» |
|--------|----------|----------|
| `NetworkPlayerController` | ç©å®¶çŠ¶æ€ç½‘ç»œåŒæ­¥ | PlayerMotor, PUN2 |
| `NetworkSyncBase` | ç½‘ç»œåŒæ­¥åŸºç±» | PUN2 |
| `NetworkInputManager` | è¾“å…¥ç½‘ç»œåŒæ­¥ | InputManager, PUN2 |

### è¾“å…¥ç³»ç»Ÿè„šæœ¬

| è„šæœ¬å | ä¸»è¦èŒè´£ | ä¾èµ–å…³ç³» |
|--------|----------|----------|
| `InputManager` | è¾“å…¥ç³»ç»Ÿç®¡ç†ã€äº‹ä»¶åˆ†å‘ | Unity Input System |
| `PlayerInput` | è¾“å…¥è¿‡æ»¤ã€æœ¬åœ°æ§åˆ¶ | InputManager |

---

## æ•°æ®æµåˆ†æ

### 1. ç©å®¶ç§»åŠ¨æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥ â†’ Unity Input System â†’ InputManager â†’ PlayerInput 
    â†“
PlayerMotor â†’ CustomGravity â†’ é‡åŠ›è®¡ç®— â†’ ç‰©ç†æ›´æ–°
    â†“
NetworkPlayerController â†’ PUN2 â†’ ç½‘ç»œåŒæ­¥
    â†“
è¿œç¨‹å®¢æˆ·ç«¯ â†’ çŠ¶æ€æ’å€¼ â†’ è§†è§‰æ›´æ–°
```

### 2. å°„å‡»ç³»ç»Ÿæ•°æ®æµ

```
å°„å‡»è¾“å…¥ â†’ PlayerInput â†’ PlayerWeaponController â†’ WeaponBase
    â†“
ProjectileWeapon â†’ åˆ›å»ºæŠ•å°„ç‰© â†’ ProjectileBase â†’ ç‰©ç†æ¨¡æ‹Ÿ
    â†“
ç¢°æ’æ£€æµ‹ â†’ ä¼¤å®³è®¡ç®— â†’ RPCåŒæ­¥ â†’ è¿œç¨‹å®¢æˆ·ç«¯æ›´æ–°
```

### 3. é‡åŠ›ç³»ç»Ÿæ•°æ®æµ

```
é‡åŠ›æºæ³¨å†Œ â†’ CustomGravity â†’ é‡åŠ›è®¡ç®—
    â†“
PlayerMotor â†’ é‡åŠ›åº”ç”¨ â†’ æ—‹è½¬æ›´æ–° â†’ æ‘„åƒæœºé€‚é…
    â†“
æŠ•å°„ç‰© â†’ é‡åŠ›å½±å“ â†’ è½¨è¿¹è®¡ç®— â†’ ç½‘ç»œåŒæ­¥
```

### 4. ç½‘ç»œåŒæ­¥æ•°æ®æµ

```
æœ¬åœ°çŠ¶æ€å˜åŒ– â†’ NetworkPlayerController â†’ æ•°æ®æ‰“åŒ…
    â†“
PUN2ä¼ è¾“ â†’ è¿œç¨‹å®¢æˆ·ç«¯ â†’ æ•°æ®è§£åŒ… â†’ çŠ¶æ€åº”ç”¨
    â†“
å®¢æˆ·ç«¯é¢„æµ‹ â†’ çŠ¶æ€æ ¡æ­£ â†’ æ’å€¼å¤„ç† â†’ è§†è§‰å‘ˆç°
```

---

## ç½‘ç»œæ¶æ„

### ç½‘ç»œæ‹“æ‰‘

GravityShooté‡‡ç”¨**PUN2çš„ä¸»æœºæ¨¡å¼**ç½‘ç»œæ¶æ„ï¼š

```
Master Client (ä¸»æœº)
    â†“
â”œâ”€â”€ Client 1 (ç©å®¶A)
â”œâ”€â”€ Client 2 (ç©å®¶B) 
â”œâ”€â”€ Client 3 (ç©å®¶C)
â””â”€â”€ Client 4 (ç©å®¶D)
```

### åŒæ­¥ç­–ç•¥

#### 1. ç©å®¶çŠ¶æ€åŒæ­¥ (30Hz)
```csharp
// å‘é€æ•°æ®
stream.SendNext(position);
stream.SendNext(rotation);
stream.SendNext(velocity);
stream.SendNext(gravityDirection);
stream.SendNext(isGrounded);

// æ¥æ”¶æ•°æ®
position = (Vector3)stream.ReceiveNext();
rotation = (Quaternion)stream.ReceiveNext();
velocity = (Vector3)stream.ReceiveNext();
```

#### 2. è¾“å…¥åŒæ­¥ (60Hz)
```csharp
// åŒæ­¥è¾“å…¥çŠ¶æ€
public struct NetworkInputData
{
    public Vector2 moveInput;
    public Vector2 lookInput;
    public bool jumpPressed;
    public bool firePressed;
    public float timestamp;
}
```

#### 3. å°„å‡»äº‹ä»¶åŒæ­¥ (RPC)
```csharp
[PunRPC]
void RPC_WeaponFired(float posX, float posY, float posZ, 
                     float dirX, float dirY, float dirZ)
{
    Vector3 muzzlePosition = new Vector3(posX, posY, posZ);
    Vector3 aimDirection = new Vector3(dirX, dirY, dirZ);
    // æ’­æ”¾è¿œç¨‹å°„å‡»æ•ˆæœ
}
```

### å®¢æˆ·ç«¯é¢„æµ‹

#### é¢„æµ‹ç®—æ³•
```csharp
// è®°å½•çŠ¶æ€å†å²
private void RecordStateHistory()
{
    var state = new NetworkPlayerState
    {
        position = transform.position,
        velocity = rigidbody.velocity,
        timestamp = PhotonNetwork.Time
    };
    _stateHistory.Enqueue(state);
}

// çŠ¶æ€æ ¡æ­£
private void ReconcileState(NetworkPlayerState serverState)
{
    float timeDiff = Mathf.Abs(serverState.timestamp - PhotonNetwork.Time);
    if (timeDiff > _reconciliationThreshold)
    {
        // åº”ç”¨æœåŠ¡å™¨çŠ¶æ€
        transform.position = serverState.position;
        rigidbody.velocity = serverState.velocity;
    }
}
```

### å»¶è¿Ÿè¡¥å¿

#### å›æº¯å‘½ä¸­æ£€æµ‹
```csharp
public bool CheckHitWithCompensation(Ray ray, float timestamp)
{
    // è®¡ç®—å»¶è¿Ÿ
    float latency = (float)(PhotonNetwork.Time - timestamp);
    
    // å›æº¯ç©å®¶ä½ç½®
    Vector3 compensatedPosition = GetPlayerPositionAtTime(timestamp - latency);
    
    // æ‰§è¡Œå‘½ä¸­æ£€æµ‹
    return Physics.Raycast(ray, out hit);
}
```

---

## æœ€ä½³å®è·µä¸è®¾è®¡æ¨¡å¼

### 1. è®¾è®¡æ¨¡å¼åº”ç”¨

#### å•ä¾‹æ¨¡å¼ (Singleton)
- **åº”ç”¨**: InputManager, GameManager
- **ä¼˜åŠ¿**: å…¨å±€è®¿é—®ç‚¹ï¼ŒçŠ¶æ€ç»Ÿä¸€ç®¡ç†
- **å®ç°**: çº¿ç¨‹å®‰å…¨çš„å»¶è¿Ÿåˆå§‹åŒ–

```csharp
public class InputManager : Singleton<InputManager>
{
    protected override void Awake()
    {
        base.Awake();
        InitializeInputSystem();
    }
}
```

#### æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory)
- **åº”ç”¨**: WeaponBase, ProjectileBase, GravitySource
- **ä¼˜åŠ¿**: æ˜“äºæ‰©å±•æ–°ç±»å‹ï¼Œä»£ç å¤ç”¨
- **å®ç°**: æŠ½è±¡åŸºç±»å®šä¹‰æ¥å£ï¼Œå…·ä½“ç±»å®ç°åŠŸèƒ½

#### è§‚å¯Ÿè€…æ¨¡å¼ (Observer)
- **åº”ç”¨**: è¾“å…¥äº‹ä»¶ç³»ç»Ÿï¼ŒçŠ¶æ€å˜åŒ–é€šçŸ¥
- **ä¼˜åŠ¿**: è§£è€¦ç»„ä»¶é—´é€šä¿¡ï¼Œçµæ´»çš„äº‹ä»¶å¤„ç†
- **å®ç°**: C#äº‹ä»¶å’Œå§”æ‰˜æœºåˆ¶

```csharp
public static event Action<Vector2> OnMoveInput;
public static event Action OnFirePressed;
```

#### ç»„ä»¶æ¨¡å¼ (Component)
- **åº”ç”¨**: Unity MonoBehaviouræ¶æ„
- **ä¼˜åŠ¿**: æ¨¡å—åŒ–è®¾è®¡ï¼ŒåŠŸèƒ½ç‹¬ç«‹
- **å®ç°**: å•ä¸€èŒè´£çš„ç»„ä»¶è®¾è®¡

### 2. ç¼–ç æœ€ä½³å®è·µ

#### å‘½åè§„èŒƒ
```csharp
// ç±»åï¼šPascalCase
public class PlayerMotor

// å…¬å…±å±æ€§ï¼šPascalCase
public Vector3 Velocity { get; }

// ç§æœ‰å­—æ®µï¼šä¸‹åˆ’çº¿+camelCase
private float _moveSpeed;

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
private const float MAX_SPEED = 20f;
```

#### æ€§èƒ½ä¼˜åŒ–å®è·µ

1. **å¯¹è±¡æ± æ¨¡å¼**
```csharp
// æŠ•å°„ç‰©å¯¹è±¡æ± 
public class ProjectilePool : MonoBehaviour
{
    private Queue<ProjectileBase> _pool = new Queue<ProjectileBase>();
    
    public ProjectileBase GetProjectile()
    {
        return _pool.Count > 0 ? _pool.Dequeue() : CreateNewProjectile();
    }
    
    public void ReturnProjectile(ProjectileBase projectile)
    {
        projectile.Reset();
        _pool.Enqueue(projectile);
    }
}
```

2. **ç¼“å­˜ç»„ä»¶å¼•ç”¨**
```csharp
public class PlayerMotor : MonoBehaviour
{
    private Rigidbody _rb;
    private PlayerInput _playerInput;
    
    private void Awake()
    {
        _rb = GetComponent<Rigidbody>();
        _playerInput = GetComponent<PlayerInput>();
    }
}
```

3. **å‡å°‘GCåˆ†é…**
```csharp
// é¿å…é¢‘ç¹åˆ›å»ºVector3
private Vector3 _tempVector = Vector3.zero;

private void UpdateMovement()
{
    _tempVector.Set(x, y, z);  // å¤ç”¨ç°æœ‰å¯¹è±¡
    transform.position = _tempVector;
}
```

#### è°ƒè¯•ä¸æ—¥å¿—

```csharp
// æ¡ä»¶è°ƒè¯•
[SerializeField] private bool _showDebugInfo = false;

private void LogDebug(string message)
{
    if (_showDebugInfo)
        Debug.Log($"[{GetType().Name}] {message}");
}

// æ€§èƒ½åˆ†ææ ‡è®°
private void ExpensiveOperation()
{
    Profiler.BeginSample("ExpensiveOperation");
    // å¤æ‚è®¡ç®—...
    Profiler.EndSample();
}
```

### 3. æ¶æ„è®¾è®¡åŸåˆ™

#### SOLIDåŸåˆ™åº”ç”¨

1. **å•ä¸€èŒè´£åŸåˆ™ (SRP)**
   - PlayerMotoråªè´Ÿè´£è¿åŠ¨æ§åˆ¶
   - PlayerViewåªè´Ÿè´£æ‘„åƒæœºç®¡ç†
   - WeaponControlleråªè´Ÿè´£æ­¦å™¨ç®¡ç†

2. **å¼€é—­åŸåˆ™ (OCP)**
   - WeaponBaseå¯æ‰©å±•æ–°æ­¦å™¨ç±»å‹
   - GravitySourceå¯æ·»åŠ æ–°é‡åŠ›æº
   - ProjectileBaseæ”¯æŒæ–°æŠ•å°„ç‰©ç±»å‹

3. **é‡Œæ°æ›¿æ¢åŸåˆ™ (LSP)**
   - æ‰€æœ‰WeaponBaseå­ç±»å¯äº’ç›¸æ›¿æ¢
   - æ‰€æœ‰ProjectileBaseå­ç±»è¡Œä¸ºä¸€è‡´
   - GravitySourceå®ç°ç±»æ¥å£ç»Ÿä¸€

4. **ä¾èµ–å€’ç½®åŸåˆ™ (DIP)**
   - PlayerMotorä¾èµ–äºPlayerInputæŠ½è±¡
   - WeaponControllerä¾èµ–äºWeaponBaseæŠ½è±¡
   - é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚å®ç°ç»†èŠ‚

---

## æ‰©å±•æŒ‡å—

### 1. æ·»åŠ æ–°æ­¦å™¨ç±»å‹

#### æ­¥éª¤1ï¼šåˆ›å»ºæ­¦å™¨æ•°æ®é…ç½®
```csharp
[CreateAssetMenu(fileName = "NewWeaponData", menuName = "Weapons/Weapon Data")]
public class LaserWeaponData : WeaponData
{
    [Header("æ¿€å…‰æ­¦å™¨ç‰¹æœ‰å±æ€§")]
    public float beamWidth = 0.1f;
    public float maxRange = 100f;
    public AnimationCurve damageFalloff;
}
```

#### æ­¥éª¤2ï¼šå®ç°æ­¦å™¨é€»è¾‘
```csharp
public class LaserWeapon : WeaponBase
{
    private LaserWeaponData LaserData => _weaponData as LaserWeaponData;
    
    public override bool Fire(Vector3 direction, float timestamp)
    {
        // æ¿€å…‰æ­¦å™¨å°„å‡»é€»è¾‘
        CreateLaserBeam(direction);
        return true;
    }
    
    protected override void NetworkFire(Vector3 direction, float timestamp)
    {
        // ç½‘ç»œåŒæ­¥é€»è¾‘
        photonView.RPC("RPC_LaserFired", RpcTarget.Others, direction);
    }
}
```

### 2. æ·»åŠ æ–°é‡åŠ›æºç±»å‹

#### åˆ›å»ºé‡åŠ›æº
```csharp
public class GravityTunnel : GravitySource
{
    [SerializeField] private Vector3 _tunnelStart;
    [SerializeField] private Vector3 _tunnelEnd;
    [SerializeField] private float _tunnelRadius = 5f;
    [SerializeField] private float _gravity = 9.8f;
    
    public override Vector3 GetGravity(Vector3 position)
    {
        // è®¡ç®—éš§é“é‡åŠ›é€»è¾‘
        Vector3 closestPoint = GetClosestPointOnTunnel(position);
        Vector3 direction = (closestPoint - position).normalized;
        float distance = Vector3.Distance(position, closestPoint);
        
        if (distance <= _tunnelRadius)
        {
            return direction * _gravity;
        }
        
        return Vector3.zero;
    }
}
```

### 3. æ‰©å±•æŠ•å°„ç‰©ç±»å‹

#### åˆ›å»ºæ–°æŠ•å°„ç‰©
```csharp
public class HomingProjectile : ProjectileBase
{
    [Header("åˆ¶å¯¼è®¾ç½®")]
    [SerializeField] private float _homingStrength = 5f;
    [SerializeField] private float _maxTurnRate = 90f;
    [SerializeField] private LayerMask _targetLayers;
    
    private Transform _target;
    
    protected override void UpdateProjectile()
    {
        base.UpdateProjectile();
        
        if (_target != null)
        {
            Vector3 directionToTarget = (_target.position - transform.position).normalized;
            Vector3 newDirection = Vector3.Slerp(transform.forward, directionToTarget, 
                                                _homingStrength * Time.deltaTime);
            
            _rigidbody.velocity = newDirection * _speed;
            transform.rotation = Quaternion.LookRotation(newDirection);
        }
    }
    
    protected override bool ProcessHit(RaycastHit hit)
    {
        // åˆ¶å¯¼å¼¹å‘½ä¸­å¤„ç†
        CreateExplosion(hit.point);
        return true; // é”€æ¯æŠ•å°„ç‰©
    }
}
```

### 4. è‡ªå®šä¹‰ç½‘ç»œåŒæ­¥

#### æ‰©å±•ç½‘ç»œåŒæ­¥æ•°æ®
```csharp
public class CustomNetworkSync : NetworkSyncBase
{
    [Header("è‡ªå®šä¹‰åŒæ­¥æ•°æ®")]
    [SerializeField] private float _customValue;
    [SerializeField] private bool _customState;
    
    protected override void WriteData(PhotonStream stream)
    {
        base.WriteData(stream);
        stream.SendNext(_customValue);
        stream.SendNext(_customState);
    }
    
    protected override void ReadData(PhotonStream stream, PhotonMessageInfo info)
    {
        base.ReadData(stream, info);
        _customValue = (float)stream.ReceiveNext();
        _customState = (bool)stream.ReceiveNext();
    }
}
```

### 5. æ·»åŠ æ–°è¾“å…¥åŠ¨ä½œ

#### æ‰©å±•è¾“å…¥ç³»ç»Ÿ
```csharp
// 1. åœ¨Input Actionsä¸­æ·»åŠ æ–°åŠ¨ä½œ
// 2. æ›´æ–°InputManager
public class InputManager : Singleton<InputManager>
{
    // æ·»åŠ æ–°çš„è¾“å…¥äº‹ä»¶
    public static event Action OnSpecialActionPressed;
    
    private void BindPlayerInputCallbacks()
    {
        // ç»‘å®šæ–°åŠ¨ä½œ
        playerActions.SpecialAction.performed += OnSpecialActionInputPressed;
    }
    
    private void OnSpecialActionInputPressed(InputAction.CallbackContext context)
    {
        OnSpecialActionPressed?.Invoke();
    }
}

// 3. åœ¨PlayerInputä¸­æ·»åŠ è¿‡æ»¤
public class PlayerInput : MonoBehaviour
{
    public bool SpecialActionPressed => _enableSpecialAction ? _filteredSpecialActionPressed : false;
    
    private void OnSpecialActionPressed()
    {
        if (_enableSpecialAction)
        {
            _filteredSpecialActionPressed = true;
        }
    }
}
```

---

## æ€»ç»“

GravityShooté¡¹ç›®é‡‡ç”¨äº†ç°ä»£åŒ–çš„Unityæ¸¸æˆå¼€å‘æ¶æ„ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š

### æ¶æ„ä¼˜åŠ¿
1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ç³»ç»ŸèŒè´£æ˜ç¡®ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **ç½‘ç»œå‹å¥½**ï¼šä»è®¾è®¡åˆæœŸè€ƒè™‘å¤šäººæ¸¸æˆéœ€æ±‚
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†çš„å¯¹è±¡æ± å’Œç¼“å­˜ç­–ç•¥
4. **æ‰©å±•æ€§å¼º**ï¼šæŠ½è±¡åŸºç±»è®¾è®¡æ”¯æŒå¿«é€Ÿæ·»åŠ æ–°åŠŸèƒ½
5. **ä»£ç è´¨é‡**ï¼šéµå¾ªSOLIDåŸåˆ™ï¼Œæ˜“äºæµ‹è¯•å’Œè°ƒè¯•

### æŠ€æœ¯äº®ç‚¹
1. **è‡ªå®šä¹‰é‡åŠ›ç³»ç»Ÿ**ï¼šç‹¬ç‰¹çš„å¤šé‡åŠ›åœºç¯å¢ƒ
2. **å®¢æˆ·ç«¯é¢„æµ‹**ï¼šä¼˜ç§€çš„ç½‘ç»œæ¸¸æˆä½“éªŒ
3. **ç‰©ç†å°„å‡»**ï¼šçœŸå®çš„å¼¹é“è®¡ç®—å’Œç¢°æ’æ£€æµ‹
4. **äº‹ä»¶é©±åŠ¨**ï¼šè§£è€¦çš„ç»„ä»¶é€šä¿¡æœºåˆ¶
5. **æ•°æ®é©±åŠ¨**ï¼šScriptableObjecté…ç½®ç³»ç»Ÿ

### å­¦ä¹ ä»·å€¼
æœ¬é¡¹ç›®æ˜¯å­¦ä¹ Unityé«˜çº§å¼€å‘æŠ€æœ¯çš„ä¼˜ç§€æ¡ˆä¾‹ï¼Œæ¶µç›–äº†ï¼š
- å¤æ‚ç‰©ç†ç³»ç»Ÿè®¾è®¡
- ç½‘ç»œæ¸¸æˆæ¶æ„
- ç°ä»£è¾“å…¥ç³»ç»Ÿåº”ç”¨
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- ä»£ç æ¶æ„æœ€ä½³å®è·µ

é€šè¿‡æ·±å…¥ç†è§£GravityShootçš„æ¶æ„è®¾è®¡ï¼Œå¼€å‘è€…å¯ä»¥æŒæ¡æ„å»ºé«˜è´¨é‡Unityæ¸¸æˆçš„æ ¸å¿ƒæŠ€èƒ½å’Œè®¾è®¡æ€æƒ³ã€‚

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2025å¹´6æœˆ23æ—¥*  
*ä½œè€…: GitHub Copilot*  
*é¡¹ç›®: GravityShoot Unity Game*
