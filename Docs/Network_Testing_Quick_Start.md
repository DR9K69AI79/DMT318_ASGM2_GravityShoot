# 网络测试快速开始指南

## 🚀 5分钟快速开始

### 第一步：设置测试场景
1. 在Unity中创建新场景或打开现有场景
2. 添加 `NetworkTestSceneSetup` 组件到任意GameObject
3. 设置玩家预制体（如果有的话）
4. 点击 Inspector 中的"设置测试场景"按钮

### 第二步：运行测试
1. 运行场景
2. 等待自动连接到Photon网络
3. 使用快捷键进行测试：
   - `F1` - 快速加入房间
   - `F2` - 离开房间
   - `F3` - 生成玩家

### 第三步：多客户端测试
1. Build项目（File → Build Settings → Build）
2. 同时运行Editor和Build版本
3. 观察两个客户端之间的同步效果

---

## 📋 测试检查清单

### 基础连接测试
- [ ] Unity Editor能够连接到Photon
- [ ] Build版本能够连接到Photon
- [ ] 显示正确的网络状态信息
- [ ] Ping值正常（<200ms）

### 房间管理测试
- [ ] 能够创建房间
- [ ] 能够加入房间
- [ ] 能够离开房间
- [ ] 多个客户端能加入同一房间
- [ ] 显示正确的玩家数量

### 玩家同步测试
- [ ] 玩家能够正确生成
- [ ] 位置同步正常
- [ ] 旋转同步正常
- [ ] 移动平滑无卡顿
- [ ] 其他玩家可见

### 网络性能测试
- [ ] 延迟在可接受范围内
- [ ] 无明显的网络抖动
- [ ] 断线能够自动重连
- [ ] 大量移动时同步稳定

---

## 🛠️ 常见问题解决

### 问题1：无法连接到Photon
**解决方案**：
1. 检查 PhotonServerSettings 中的 App ID
2. 确认网络连接正常
3. 查看Console中的错误信息
4. 尝试重启Unity

### 问题2：玩家同步不正常
**解决方案**：
1. 确认玩家预制体有PhotonView组件
2. 检查PhotonView的ViewID是否正确分配
3. 确认玩家预制体在Resources文件夹中
4. 检查IPunObservable接口实现

### 问题3：Build版本无法运行
**解决方案**：
1. 确认所有网络预制体在Resources文件夹中
2. 检查Build Settings中包含了所有必要场景
3. 确认没有Editor专用代码在Build中运行
4. 查看Player.log文件的错误信息

### 问题4：高延迟或卡顿
**解决方案**：
1. 降低发送频率（SendRate/SerializationRate）
2. 减少同步的数据量
3. 使用对象池减少实例化
4. 选择更近的Photon服务器区域

---

## 📝 测试记录模板

### 测试环境
- Unity版本：_______
- PUN2版本：_______
- 测试日期：_______
- 网络环境：_______

### 测试结果
| 测试项目 | 预期结果 | 实际结果 | 通过/失败 | 备注 |
|---------|---------|---------|----------|------|
| 连接Photon | 成功连接 |  |  |  |
| 创建房间 | 房间创建成功 |  |  |  |
| 加入房间 | 成功加入 |  |  |  |
| 玩家生成 | 玩家正确生成 |  |  |  |
| 位置同步 | 位置实时同步 |  |  |  |
| 多客户端 | 多人正常游戏 |  |  |  |

### 性能数据
- 平均Ping：_____ ms
- 发送频率：_____ Hz
- 序列化频率：_____ Hz
- 内存使用：_____ MB
- CPU使用：_____ %

---

## 🎯 下一步开发建议

### 初级功能（已完成基础测试后）
1. **添加基础移动**：实现WASD移动和鼠标视角
2. **添加跳跃**：实现空格键跳跃同步
3. **添加重力效果**：实现重力方向变化同步
4. **添加简单UI**：显示玩家列表和网络状态

### 中级功能（移动系统完善后）
1. **武器系统**：实现射击和子弹同步
2. **生命值系统**：实现伤害和治疗同步
3. **道具系统**：实现物品拾取和使用
4. **游戏模式**：实现不同的游戏规则

### 高级功能（核心功能完成后）
1. **AI系统**：添加AI玩家或敌人
2. **地图系统**：实现多个关卡和场景切换
3. **社交功能**：添加聊天、好友、团队功能
4. **数据持久化**：实现玩家数据保存和载入

---

## 📚 相关文档

- [PUN2 完全开发指南](./PUN2_Complete_Development_Guide.md) - 详细的开发教程
- [NetworkManager 使用指南](./NetworkManager_Usage_Guide.md) - 网络管理器详解
- [Photon 官方文档](https://doc.photonengine.com/en-us/pun/v2/getting-started/initial-setup) - 官方参考资料

---

## 💡 提示和技巧

1. **始终先测试单机功能**：确保游戏逻辑在单机环境下正常工作
2. **逐步添加网络功能**：不要一次性添加所有网络功能
3. **重视错误处理**：网络游戏需要处理各种异常情况
4. **优化网络流量**：减少不必要的数据传输
5. **测试不同网络环境**：在不同网络条件下测试游戏

记住：网络游戏开发是一个迭代过程，需要不断测试和改进！
